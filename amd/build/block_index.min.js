define ("block_opencast/block_index",["jquery","core/modal_factory","core/modal_events","core/str","core/url"],function(a,b,c,d,f){var g=function(d,g,h){a(".start-workflow").on("click",function(i){i.preventDefault();var e=a(i.currentTarget),j="<select class=\"custom-select mb-3\" id=\"workflowselect\" name=\"workflow\">";for(var k in h){j+="<option value=\""+k+"\">"+h[k].title+"</option>"}j+="</select>";b.create({type:b.types.SAVE_CANCEL,title:g[5],body:"<form id=\"startWorkflowForm\" method=\"post\" action=\""+f.relativeUrl("blocks/opencast/startworkflow.php",{courseid:d,videoid:e.data("id")})+"\"><div class=\"form-group\"><p>"+g[6]+"</p>"+j+"<div id=\"workflowdesc\"></div></form>"}).then(function(b){b.setSaveButtonText(g[5]);var d=b.getRoot();d.on(c.save,function(b){a("#startWorkflowForm").submit();b.preventDefault()});b.show().then(function(){a("#workflowdesc").html(h[a("#workflowselect").val()].description);a("#workflowselect").change(function(){a("#workflowdesc").html(h[a(this).val()].description)})})})})},h=function(d,g){a(".report-problem").on("click",function(h){h.preventDefault();var e=a(h.currentTarget);b.create({type:b.types.SAVE_CANCEL,title:g[0],body:"<form id=\"reportProblemForm\" method=\"post\" action=\""+f.relativeUrl("blocks/opencast/reportproblem.php",{courseid:d,videoid:e.data("id")})+"\"><div class=\"form-group\"><label for=\"inputMessage\">"+g[1]+"</label><textarea class=\"form-control\" id=\"inputMessage\" name=\"inputMessage\" rows=\"4\" placeholder=\""+g[2]+"\"></textarea>  <div class=\"invalid-feedback d-none\" id=\"messageValidation\">"+g[3]+"</div></div></form>"}).then(function(b){b.setSaveButtonText(g[4]);var d=b.getRoot();d.on(c.save,function(b){if(a("#inputMessage").val()){a("#reportProblemForm").submit()}else{a("#inputMessage").addClass("is-invalid");a("#messageValidation").removeClass("d-none")}b.preventDefault()});b.show()})})};return{init:function init(a,b){d.get_strings([{key:"reportproblem_modal_title",component:"block_opencast"},{key:"reportproblem_modal_body",component:"block_opencast"},{key:"reportproblem_modal_placeholder",component:"block_opencast"},{key:"reportproblem_modal_required",component:"block_opencast"},{key:"reportproblem_modal_submit",component:"block_opencast"},{key:"startworkflow",component:"block_opencast"},{key:"startworkflow_modal_body",component:"block_opencast"}]).then(function(c){g(a,c,b);h(a,c)})}}});
//# sourceMappingURL=block_index.min.js.map
