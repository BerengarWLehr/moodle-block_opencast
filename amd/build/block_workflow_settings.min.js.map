{"version":3,"sources":["../src/block_workflow_settings.js"],"names":["define","$","ModalFactory","ModalEvents","str","url","initConfig","langStrings","on","e","preventDefault","workflowid","currentTarget","data","create","type","types","DEFAULT","title","body","relativeUrl","then","modal","show","init","get_strings","key","component","results","addClass","window","addEventListener","event","origin","height"],"mappings":"AAuBAA,OAAM,0CAAC,CAAC,QAAD,CAAW,oBAAX,CAAiC,mBAAjC,CAAsD,UAAtD,CAAkE,UAAlE,CAA8E,WAA9E,CAA2F,mBAA3F,CAAD,CACF,SAASC,CAAT,CAAYC,CAAZ,CAA0BC,CAA1B,CAAuCC,CAAvC,CAA4CC,CAA5C,CAAqE,IAE7DC,CAAAA,CAAU,CAAG,SAASC,CAAT,CAAsB,CACnCN,CAAC,CAAC,wCAAD,CAAD,CAA0CO,EAA1C,CAA6C,OAA7C,CAAsD,SAASC,CAAT,CAAY,CAC9DA,CAAC,CAACC,cAAF,GACA,GAAIC,CAAAA,CAAU,CAAGV,CAAC,CAACQ,CAAC,CAACG,aAAH,CAAD,CAAmBC,IAAnB,CAAwB,IAAxB,CAAjB,CACAX,CAAY,CAACY,MAAb,CAAoB,CAChBC,IAAI,CAAEb,CAAY,CAACc,KAAb,CAAmBC,OADT,CAEhBC,KAAK,CAAEX,CAAW,CAAC,CAAD,CAFF,CAGhBY,IAAI,CAAE,2GACFd,CAAG,CAACe,WAAJ,CAAgB,8CAAhB,CAAgE,CAC5D,WAAcT,CAD8C,CAAhE,CADE,CAGG,aANO,CAApB,EAQKU,IARL,CAQU,SAASC,CAAT,CAAgB,CAClBA,CAAK,CAACC,IAAN,EACH,CAVL,CAWH,CAdD,CAeH,CAlBgE,CAgEjE,MAAO,CACHC,IAAI,CAzCG,QAAPA,CAAAA,IAAO,EAAW,CA0BlBpB,CAAG,CAACqB,WAAJ,CAxBc,CACV,CACIC,GAAG,CAAE,4BADT,CAEIC,SAAS,CAAE,gBAFf,CADU,CAKV,CACID,GAAG,CAAE,iBADT,CAEIC,SAAS,CAAE,gBAFf,CALU,CASV,CACID,GAAG,CAAE,yBADT,CAEIC,SAAS,CAAE,gBAFf,CATU,CAaV,CACID,GAAG,CAAE,QADT,CAbU,CAgBV,CACIA,GAAG,CAAE,OADT,CAhBU,CAmBV,CACIA,GAAG,CAAE,uBADT,CAEIC,SAAS,CAAE,gBAFf,CAnBU,CAwBd,EAAyBN,IAAzB,CAA8B,SAASO,CAAT,CAAkB,CAC5CtB,CAAU,CAACsB,CAAD,CACb,CAFD,EAIA3B,CAAC,CAAC,qCAAD,CAAD,CAAuC4B,QAAvC,CAAgD,YAAhD,EAEAC,MAAM,CAACC,gBAAP,CAAwB,SAAxB,CAAmC,SAASC,CAAT,CAAgB,CAC/C,GAAqB,MAAjB,GAAAA,CAAK,CAACC,MAAV,CAA6B,CACzB,MACH,CACDhC,CAAC,CAAC,eAAD,CAAD,CAAmBiC,MAAnB,CAA0BF,CAAK,CAACnB,IAAhC,CACH,CALD,CAMH,CAEM,CAGV,CApEC,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript to initialise the configuration panels for workflow definitions.\n *\n * @package    block_opencast\n * @copyright  2021 Tamara Gunkel, University of MÃ¼nster\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/modal_factory', 'core/modal_events', 'core/str', 'core/url', 'core/ajax', 'core/notification'],\n    function($, ModalFactory, ModalEvents, str, url, ajax, notification) {\n\n        var initConfig = function(langStrings) {\n            $('button[data-class=\"config_workflow\"]').on('click', function(e) {\n                e.preventDefault();\n                var workflowid = $(e.currentTarget).data('id');\n                ModalFactory.create({\n                    type: ModalFactory.types.DEFAULT,\n                    title: langStrings[0],\n                    body: '<iframe id=\"config-frame\" class=\"w-100 mh-100 border-0\" sandbox=\"allow-forms allow-scripts\" src=\"' +\n                        url.relativeUrl('blocks/opencast/serveworkflowconfigpanel.php', {\n                            'workflowid': workflowid\n                        }) + '\"</iframe>'\n                })\n                    .then(function(modal) {\n                        modal.show();\n                    });\n            });\n        };\n\n\n        /*\n         * Initialise all of the modules for the opencast block.\n         */\n        var init = function() {\n            // Load strings\n            var strings = [\n                {\n                    key: 'configworkflow_modal_title',\n                    component: 'block_opencast'\n                },\n                {\n                    key: 'workflow_delete',\n                    component: 'block_opencast'\n                },\n                {\n                    key: 'workflow_delete_confirm',\n                    component: 'block_opencast'\n                },\n                {\n                    key: 'delete'\n                },\n                {\n                    key: 'error'\n                },\n                {\n                    key: 'workflow_delete_error',\n                    component: 'block_opencast'\n                }\n            ];\n            str.get_strings(strings).then(function(results) {\n                initConfig(results);\n            });\n\n            $('button[data-class=\"del_workflow\"]').addClass('btn-danger');\n\n            window.addEventListener('message', function(event) {\n                if (event.origin !== \"null\") {\n                    return;\n                }\n                $('#config-frame').height(event.data);\n            });\n        };\n\n        return {\n            init: init\n        };\n    });\n\n"],"file":"block_workflow_settings.min.js"}