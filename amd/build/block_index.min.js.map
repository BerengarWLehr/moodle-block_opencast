{"version":3,"sources":["../src/block_index.js"],"names":["define","$","ModalFactory","ModalEvents","str","url","init","courseid","get_strings","key","component","then","results","on","e","clickedVideo","currentTarget","create","type","types","SAVE_CANCEL","title","body","relativeUrl","data","modal","setSaveButtonText","root","getRoot","save","val","submit","addClass","removeClass","preventDefault","show"],"mappings":"AAuBAA,OAAM,8BAAC,CAAC,QAAD,CAAW,oBAAX,CAAiC,mBAAjC,CAAsD,UAAtD,CAAkE,UAAlE,CAAD,CAAgF,SAAUC,CAAV,CAAaC,CAAb,CAA2BC,CAA3B,CAAwCC,CAAxC,CAA6CC,CAA7C,CAAkD,CAkEpI,MAAO,CACHC,IAAI,CA7DG,QAAPA,CAAAA,IAAO,CAAUC,CAAV,CAAoB,CAwB3BH,CAAG,CAACI,WAAJ,CAtBc,CACV,CACIC,GAAG,CAAE,2BADT,CAEIC,SAAS,CAAE,gBAFf,CADU,CAKV,CACID,GAAG,CAAE,0BADT,CAEIC,SAAS,CAAE,gBAFf,CALU,CASV,CACID,GAAG,CAAE,iCADT,CAEIC,SAAS,CAAE,gBAFf,CATU,CAaV,CACID,GAAG,CAAE,8BADT,CAEIC,SAAS,CAAE,gBAFf,CAbU,CAiBV,CACID,GAAG,CAAE,4BADT,CAEIC,SAAS,CAAE,gBAFf,CAjBU,CAsBd,EAAyBC,IAAzB,CAA8B,SAASC,CAAT,CAAkB,CAC5CX,CAAC,CAAC,iBAAD,CAAD,CAAqBY,EAArB,CAAwB,OAAxB,CAAiC,SAASC,CAAT,CAAY,CACzC,GAAIC,CAAAA,CAAY,CAAGd,CAAC,CAACa,CAAC,CAACE,aAAH,CAApB,CACAd,CAAY,CAACe,MAAb,CAAoB,CAChBC,IAAI,CAAEhB,CAAY,CAACiB,KAAb,CAAmBC,WADT,CAEhBC,KAAK,CAAET,CAAO,CAAC,CAAD,CAFE,CAGhBU,IAAI,CAAE,2CAA0CjB,CAAG,CAACkB,WAAJ,CAAgB,2BAAhB,CAA6C,CACrF,SAAYhB,CADyE,CAErF,QAAWQ,CAAY,CAACS,IAAb,CAAkB,IAAlB,CAF0E,CAA7C,IAA1C,6DAI6BZ,CAAO,CAAC,CAAD,CAJpC,0FAMFA,CAAO,CAAC,CAAD,CANL,oFAOiEA,CAAO,CAAC,CAAD,CAPxE,sBAHU,CAApB,EAaKD,IAbL,CAaU,SAAUc,CAAV,CAAiB,CACnBA,CAAK,CAACC,iBAAN,CAAwBd,CAAO,CAAC,CAAD,CAA/B,EACA,GAAIe,CAAAA,CAAI,CAAGF,CAAK,CAACG,OAAN,EAAX,CACAD,CAAI,CAACd,EAAL,CAAQV,CAAW,CAAC0B,IAApB,CAA0B,SAASf,CAAT,CAAY,CAClC,GAAIb,CAAC,CAAC,eAAD,CAAD,CAAmB6B,GAAnB,EAAJ,CAA8B,CAC1B7B,CAAC,CAAC,oBAAD,CAAD,CAAwB8B,MAAxB,EACH,CAFD,IAEO,CACH9B,CAAC,CAAC,eAAD,CAAD,CAAmB+B,QAAnB,CAA4B,YAA5B,EACA/B,CAAC,CAAC,oBAAD,CAAD,CAAwBgC,WAAxB,CAAoC,QAApC,CACH,CACDnB,CAAC,CAACoB,cAAF,EACH,CARD,EASAT,CAAK,CAACU,IAAN,EAEH,CA3BL,EA4BArB,CAAC,CAACoB,cAAF,EACH,CA/BD,CAgCH,CAjCD,CAkCH,CAEM,CAGV,CArEK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript to initialise the opencast block.\n *\n * @package    block_opencast\n * @copyright  2021 Tamara Gunkel, University of MÃ¼nster\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/modal_factory', 'core/modal_events', 'core/str', 'core/url'], function ($, ModalFactory, ModalEvents, str, url) {\n\n    /**\n     * Initialise all of the modules for the opencast block.\n     *\n     */\n    var init = function (courseid) {\n        // Load strings\n        var strings = [\n            {\n                key: 'reportproblem_modal_title',\n                component: 'block_opencast'\n            },\n            {\n                key: 'reportproblem_modal_body',\n                component: 'block_opencast'\n            },\n            {\n                key: 'reportproblem_modal_placeholder',\n                component: 'block_opencast'\n            },\n            {\n                key: 'reportproblem_modal_required',\n                component: 'block_opencast'\n            },\n            {\n                key: 'reportproblem_modal_submit',\n                component: 'block_opencast'\n            }\n        ];\n        str.get_strings(strings).then(function(results) {\n            $('.report-problem').on('click', function(e) {\n                var clickedVideo = $(e.currentTarget);\n                ModalFactory.create({\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    title: results[0],\n                    body: '<form id=\"reportProblemForm\" action=\"' + url.relativeUrl('blocks/opencast/index.php', {\n                            'courseid': courseid,\n                            'videoid': clickedVideo.data('id')\n                        }, true) + '\"><div class=\"form-group\">' +\n                        '<label for=\"inputMessage\">' + results[1] + '</label>' +\n                        '<textarea class=\"form-control\" id=\"inputMessage\" rows=\"4\" placeholder=\"' +\n                        results[2] + '\">' + '</textarea>' +\n                        '  <div class=\"invalid-feedback d-none\" id=\"messageValidation\">' + results[3] + '</div>' +\n                        '</div></form>'\n                })\n                    .then(function (modal) {\n                        modal.setSaveButtonText(results[4]);\n                        var root = modal.getRoot();\n                        root.on(ModalEvents.save, function(e) {\n                            if ($('#inputMessage').val()) {\n                                $('#reportProblemForm').submit();\n                            } else {\n                                $('#inputMessage').addClass('is-invalid');\n                                $('#messageValidation').removeClass('d-none');\n                            }\n                            e.preventDefault();\n                        });\n                        modal.show();\n\n                    });\n                e.preventDefault();\n            });\n        });\n    };\n\n    return {\n        init: init\n    };\n});\n\n"],"file":"block_index.min.js"}