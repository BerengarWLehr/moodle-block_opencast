{"version":3,"sources":["../src/block_index.js"],"names":["define","$","ModalFactory","ModalEvents","str","url","init","courseid","get_strings","key","component","then","results","on","e","preventDefault","clickedVideo","currentTarget","create","type","types","SAVE_CANCEL","title","body","relativeUrl","data","modal","setSaveButtonText","root","getRoot","save","val","submit","addClass","removeClass","show"],"mappings":"AAuBAA,OAAM,8BAAC,CAAC,QAAD,CAAW,oBAAX,CAAiC,mBAAjC,CAAsD,UAAtD,CAAkE,UAAlE,CAAD,CACF,SAASC,CAAT,CAAYC,CAAZ,CAA0BC,CAA1B,CAAuCC,CAAvC,CAA4CC,CAA5C,CAAiD,CAkEjD,MAAO,CACHC,IAAI,CA9DG,QAAPA,CAAAA,IAAO,CAASC,CAAT,CAAmB,CAwB1BH,CAAG,CAACI,WAAJ,CAtBc,CACV,CACIC,GAAG,CAAE,2BADT,CAEIC,SAAS,CAAE,gBAFf,CADU,CAKV,CACID,GAAG,CAAE,0BADT,CAEIC,SAAS,CAAE,gBAFf,CALU,CASV,CACID,GAAG,CAAE,iCADT,CAEIC,SAAS,CAAE,gBAFf,CATU,CAaV,CACID,GAAG,CAAE,8BADT,CAEIC,SAAS,CAAE,gBAFf,CAbU,CAiBV,CACID,GAAG,CAAE,4BADT,CAEIC,SAAS,CAAE,gBAFf,CAjBU,CAsBd,EAAyBC,IAAzB,CAA8B,SAASC,CAAT,CAAkB,CAC5CX,CAAC,CAAC,iBAAD,CAAD,CAAqBY,EAArB,CAAwB,OAAxB,CAAiC,SAASC,CAAT,CAAY,CACzCA,CAAC,CAACC,cAAF,GACA,GAAIC,CAAAA,CAAY,CAAGf,CAAC,CAACa,CAAC,CAACG,aAAH,CAApB,CACAf,CAAY,CAACgB,MAAb,CAAoB,CAChBC,IAAI,CAAEjB,CAAY,CAACkB,KAAb,CAAmBC,WADT,CAEhBC,KAAK,CAAEV,CAAO,CAAC,CAAD,CAFE,CAGhBW,IAAI,CAAE,2DACFlB,CAAG,CAACmB,WAAJ,CAAgB,mCAAhB,CAAqD,CACjD,SAAYjB,CADqC,CAEjD,QAAWS,CAAY,CAACS,IAAb,CAAkB,IAAlB,CAFsC,CAArD,CADE,6DAK6Bb,CAAO,CAAC,CAAD,CALpC,gHAOFA,CAAO,CAAC,CAAD,CAPL,oFAQiEA,CAAO,CAAC,CAAD,CARxE,sBAHU,CAApB,EAcKD,IAdL,CAcU,SAASe,CAAT,CAAgB,CAClBA,CAAK,CAACC,iBAAN,CAAwBf,CAAO,CAAC,CAAD,CAA/B,EACA,GAAIgB,CAAAA,CAAI,CAAGF,CAAK,CAACG,OAAN,EAAX,CACAD,CAAI,CAACf,EAAL,CAAQV,CAAW,CAAC2B,IAApB,CAA0B,SAAShB,CAAT,CAAY,CAClC,GAAIb,CAAC,CAAC,eAAD,CAAD,CAAmB8B,GAAnB,EAAJ,CAA8B,CAC1B9B,CAAC,CAAC,oBAAD,CAAD,CAAwB+B,MAAxB,EACH,CAFD,IAEO,CACH/B,CAAC,CAAC,eAAD,CAAD,CAAmBgC,QAAnB,CAA4B,YAA5B,EACAhC,CAAC,CAAC,oBAAD,CAAD,CAAwBiC,WAAxB,CAAoC,QAApC,CACH,CACDpB,CAAC,CAACC,cAAF,EACH,CARD,EASAW,CAAK,CAACS,IAAN,EAEH,CA5BL,CA6BH,CAhCD,CAiCH,CAlCD,CAmCH,CAEM,CAGV,CAtEK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript to initialise the opencast block.\n *\n * @package    block_opencast\n * @copyright  2021 Tamara Gunkel, University of MÃ¼nster\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/modal_factory', 'core/modal_events', 'core/str', 'core/url'],\n    function($, ModalFactory, ModalEvents, str, url) {\n\n    /*\n     * Initialise all of the modules for the opencast block.\n     */\n    var init = function(courseid) {\n        // Load strings\n        var strings = [\n            {\n                key: 'reportproblem_modal_title',\n                component: 'block_opencast'\n            },\n            {\n                key: 'reportproblem_modal_body',\n                component: 'block_opencast'\n            },\n            {\n                key: 'reportproblem_modal_placeholder',\n                component: 'block_opencast'\n            },\n            {\n                key: 'reportproblem_modal_required',\n                component: 'block_opencast'\n            },\n            {\n                key: 'reportproblem_modal_submit',\n                component: 'block_opencast'\n            }\n        ];\n        str.get_strings(strings).then(function(results) {\n            $('.report-problem').on('click', function(e) {\n                e.preventDefault();\n                var clickedVideo = $(e.currentTarget);\n                ModalFactory.create({\n                    type: ModalFactory.types.SAVE_CANCEL,\n                    title: results[0],\n                    body: '<form id=\"reportProblemForm\" method=\"post\" action=\"' +\n                        url.relativeUrl('blocks/opencast/reportproblem.php', {\n                            'courseid': courseid,\n                            'videoid': clickedVideo.data('id')\n                        }) + '\"><div class=\"form-group\">' +\n                        '<label for=\"inputMessage\">' + results[1] + '</label>' +\n                        '<textarea class=\"form-control\" id=\"inputMessage\" name=\"inputMessage\" rows=\"4\" placeholder=\"' +\n                        results[2] + '\">' + '</textarea>' +\n                        '  <div class=\"invalid-feedback d-none\" id=\"messageValidation\">' + results[3] + '</div>' +\n                        '</div></form>'\n                })\n                    .then(function(modal) {\n                        modal.setSaveButtonText(results[4]);\n                        var root = modal.getRoot();\n                        root.on(ModalEvents.save, function(e) {\n                            if ($('#inputMessage').val()) {\n                                $('#reportProblemForm').submit();\n                            } else {\n                                $('#inputMessage').addClass('is-invalid');\n                                $('#messageValidation').removeClass('d-none');\n                            }\n                            e.preventDefault();\n                        });\n                        modal.show();\n\n                    });\n            });\n        });\n    };\n\n    return {\n        init: init\n    };\n});\n\n"],"file":"block_index.min.js"}